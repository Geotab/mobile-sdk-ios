<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Index  Reference</title>
    <link rel="stylesheet" type="text/css" href="css/jazzy.css" />
    <link rel="stylesheet" type="text/css" href="css/highlight.css" />
    <meta charset='utf-8'>
    <script src="js/jquery.min.js" defer></script>
    <script src="js/jazzy.js" defer></script>
    
    <script src="js/lunr.min.js" defer></script>
    <script src="js/typeahead.jquery.js" defer></script>
    <script src="js/jazzy.search.js" defer></script>
  </head>
  <body>
    <a title="Index  Reference"></a>
    <header>
      <div class="content-wrapper">
        <p><a href="index.html"> Docs</a> (100% documented)</p>
        <div class="header-right">
          <form role="search" action="search.json">
            <input type="text" placeholder="Search documentation" data-typeahead>
          </form>
        </div>
      </div>
    </header>
    <div class="content-wrapper">
      <p id="breadcrumbs">
        <a href="index.html">Index</a>
      </p>
    </div>
    <div class="content-wrapper">
      <nav class="sidebar">
        <ul class="nav-groups">
          <li class="nav-group-name">
            <a href="Classes.html">Classes</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Classes/DriveSdkConfig.html">DriveSdkConfig</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/DriveViewController.html">DriveViewController</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/Module.html">Module</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/ModuleFunction.html">ModuleFunction</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/MyGeotabSdkConfig.html">MyGeotabSdkConfig</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/MyGeotabViewController.html">MyGeotabViewController</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Enums.html">Enumerations</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Enums/GeotabDriveErrors.html">GeotabDriveErrors</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Extensions.html">Extensions</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Extensions/Notification.html">Notification</a>
              </li>
              <li class="nav-group-task">
                <a href="Extensions/Notification/Name.html">â€“ Name</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Functions.html">Functions</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Functions.html#/s:15GeotabMobileSDK6toJsonySSSgxSERzlF">toJson(_:)</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Structs.html">Structures</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Structs/CredentialResult.html">CredentialResult</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/GeotabCredentials.html">GeotabCredentials</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/MobileSdkOptions.html">MobileSdkOptions</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Typealiases.html">Type Aliases</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Typealiases.html#/s:15GeotabMobileSDK33DriverActionNecessaryCallbackTypea">DriverActionNecessaryCallbackType</a>
              </li>
              <li class="nav-group-task">
                <a href="Typealiases.html#/s:15GeotabMobileSDK36LastServerAddressUpdatedCallbackTypea">LastServerAddressUpdatedCallbackType</a>
              </li>
              <li class="nav-group-task">
                <a href="Typealiases.html#/s:15GeotabMobileSDK25LoginRequiredCallbackTypea">LoginRequiredCallbackType</a>
              </li>
              <li class="nav-group-task">
                <a href="Typealiases.html#/s:15GeotabMobileSDK26PageNavigationCallbackTypea">PageNavigationCallbackType</a>
              </li>
            </ul>
          </li>
        </ul>
      </nav>
      <article class="main-content">
        <section>
          <section class="section">
            
            <p><a href="https://github.com/Geotab/mobile-sdk-ios/blob/main/LICENSE"><img src="https://img.shields.io/github/license/Geotab/mobile-sdk-ios" alt="GitHub license"></a> <a href="https://geotab.github.io/mobile-sdk-ios/Classes/DriveViewController.html"><img src="https://img.shields.io/badge/docs-passing-brightgreen" alt="GitHub docs"></a> <a href="https://swift.org/"><img src="https://img.shields.io/badge/swift-4%20%7C%204.2%20%7C%205-brightgreen" alt="GitHub swift"></a> <a href="https://github.com/Geotab/mobile-sdk-ios/tags"><img src="https://img.shields.io/github/v/tag/Geotab/mobile-sdk-ios?label=release" alt="GitHub tag (latest by date)"></a></p>
<h1 id='mobile-sdk-ios' class='heading'>Mobile SDK iOS</h1>
<h2 id='how-to-start' class='heading'>How to start</h2>
<h3 id='installation' class='heading'>Installation</h3>

<p>The Geotab Mobile SDK is a Swift Package. Refer to Apple&rsquo;s documentation for how to add the SDK to your project: <a href="https://developer.apple.com/documentation/xcode/adding_package_dependencies_to_your_app">https://developer.apple.com/documentation/xcode/adding_package_dependencies_to_your_app</a></p>

<p>Using the Mobile SDK with SwiftUI is not recommended. </p>

<p><strong>Add background mode capabilities</strong></p>

<p>In your app&rsquo;s &ldquo;Signing and Capabilities&rdquo; section, add &ldquo;Background mode&rdquo; section and check the &ldquo;Audio, Airplay and Picture in Picture&rdquo; and &ldquo;Location updates&rdquo; options. </p>

<p><strong>Info.plist</strong></p>

<p>The following keys must be added to your app&rsquo;s Info.plist:</p>

<ul>
<li>&ldquo;Privacy - Location Always Usage Description&rdquo;</li>
<li>&ldquo;Privacy - Location Always and When In Use Usage Description&rdquo;</li>
<li>&ldquo;Privacy - Location When In Use Usage Description&rdquo;</li>
<li>&ldquo;Privacy - Camera Usage Description&rdquo;</li>
<li>&ldquo;Privacy - Photo Library Usage Description&rdquo;</li>
<li>&ldquo;Privacy - Face ID Usage Description&rdquo;</li>
<li>&ldquo;Privacy - Bluetooth Always Usage Description&rdquo;</li>
<li>&ldquo;Privacy - Bluetooth Peripheral Usage Description&rdquo;</li>
<li>&ldquo;Privacy - Motion Usage Description&rdquo;</li>
</ul>
<h3 id='what-is-driveviewcontroller' class='heading'>What is DriveViewController?</h3>

<p>DriveViewController is the starting point to integrate the Geotab Mobile SDK. It&rsquo;s the container for the Geotab Drive web app equipped with native APIs for accessing the contained app&rsquo;s data.</p>
<h3 id='initialization' class='heading'>Initialization</h3>

<p>Inside your <code>main</code> controller, define a property that holds a singleton instance of <code><a href="Classes/DriveViewController.html">DriveViewController</a></code>.</p>
<pre class="highlight swift"><code><span class="kd">private</span> <span class="k">var</span> <span class="nv">driveVC</span><span class="p">:</span> <span class="kt">DriveViewController</span><span class="o">!</span>
</code></pre>

<p>If your drivers should login from a specific Geotab server, then you should set <code>serverAddress</code> first:</p>
<pre class="highlight swift"><code><span class="kt">DriveSdkConfig</span><span class="o">.</span><span class="n">serverAddress</span> <span class="o">=</span> <span class="s">"&lt;server-name&gt;.geotab.com"</span>
</code></pre>

<p>Do not prefix the address with &ldquo;https://&rdquo;.</p>

<p>You should also set up a listener for <code>LastServerAddress</code> updates:</p>
<pre class="highlight swift"><code><span class="n">driveVC</span><span class="o">.</span><span class="n">setLastServerAddressUpdatedCallback</span> <span class="p">{</span> <span class="n">server</span> <span class="k">in</span>
    <span class="k">let</span> <span class="nv">store</span> <span class="o">=</span> <span class="kt">UserDefaults</span><span class="o">.</span><span class="n">standard</span>
    <span class="n">store</span><span class="o">.</span><span class="nf">setValue</span><span class="p">(</span><span class="n">server</span><span class="p">,</span> <span class="nv">forKey</span><span class="p">:</span> <span class="kt">MainViewController</span><span class="o">.</span><span class="kt">GEOTAB_DRIVE_LAST_SERVER_KEY</span><span class="p">)</span>
    <span class="kt">DriveSdkConfig</span><span class="o">.</span><span class="n">serverAddress</span> <span class="o">=</span> <span class="n">server</span>
<span class="p">}</span>
</code></pre>

<p>Save the last the value of <code>LastServerAddress</code> in persistent storage. To allow for offline caching, on app launch read the value from persistent storage and set it to <code><a href="Classes/DriveSdkConfig.html#/s:15GeotabMobileSDK14DriveSdkConfigC13serverAddressSSvpZ">DriveSdkConfig.serverAddress</a></code> before executing any Drive SDK APIs.</p>

<p>Initialize the instance during <code>viewDidLoad()</code> of your <code>main</code> controller</p>
<pre class="highlight swift"><code><span class="n">driveVC</span> <span class="o">=</span> <span class="kt">DriveViewController</span><span class="p">(</span><span class="nv">modules</span><span class="p">:</span> <span class="p">[])</span>
</code></pre>
<h3 id='login' class='heading'>Login</h3>

<p>The Geotab Mobile SDK allows integrators use their own authentication and user management. All the SDK needs to know to log into Geotab Drive is a user&rsquo;s credential. </p>

<p>Supply credentials to <code><a href="Classes/DriveViewController.html">DriveViewController</a></code> as follows:</p>
<pre class="highlight swift"><code><span class="n">driveVC</span><span class="o">.</span><span class="nf">setSession</span><span class="p">(</span><span class="nv">credentialResult</span><span class="p">:</span> <span class="kt">CredentialResult</span><span class="p">,</span> <span class="nv">isCoDriver</span><span class="p">:</span> <span class="o">&lt;</span><span class="k">set</span> <span class="n">to</span> <span class="kc">true</span> <span class="k">if</span> <span class="n">it</span><span class="err">'</span><span class="n">s</span> <span class="n">a</span> <span class="n">co</span><span class="o">-</span><span class="n">driver</span> <span class="n">login</span><span class="o">&gt;</span><span class="p">)</span>
</code></pre>

<p>where credentials is an instance of: </p>
<pre class="highlight swift"><code><span class="kd">public</span> <span class="kd">struct</span> <span class="kt">GeotabCredentials</span><span class="p">:</span> <span class="kt">Codable</span> <span class="p">{</span>

    <span class="k">var</span> <span class="nv">userName</span><span class="p">:</span> <span class="kt">String</span>
    <span class="k">var</span> <span class="nv">database</span><span class="p">:</span> <span class="kt">String</span>
    <span class="k">var</span> <span class="nv">sessionID</span><span class="p">:</span> <span class="kt">String</span>

    <span class="kd">public</span> <span class="nf">init</span><span class="p">(</span><span class="nv">userName</span><span class="p">:</span> <span class="kt">String</span><span class="p">,</span> <span class="nv">database</span><span class="p">:</span> <span class="kt">String</span><span class="p">,</span> <span class="nv">sessionID</span><span class="p">:</span> <span class="kt">String</span><span class="p">){</span>
        <span class="k">self</span><span class="o">.</span><span class="n">userName</span> <span class="o">=</span> <span class="n">userName</span>
        <span class="k">self</span><span class="o">.</span><span class="n">database</span> <span class="o">=</span> <span class="n">database</span>
        <span class="k">self</span><span class="o">.</span><span class="n">sessionID</span> <span class="o">=</span> <span class="n">sessionID</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre>

<p>See <code>GeotabCredentials.swift</code>.</p>
<h3 id='present-the-code-driveviewcontroller-code' class='heading'>Present the <code><a href="Classes/DriveViewController.html">DriveViewController</a></code></h3>

<p>Once user credentials are supplied, present the view controller to the user. <code><a href="Classes/DriveViewController.html">DriveViewController</a></code> will automatically validate the session and continue through the normal Geotab Drive workflow.</p>
<pre class="highlight swift"><code><span class="k">self</span><span class="o">.</span><span class="nf">present</span><span class="p">(</span><span class="n">driveVC</span><span class="p">,</span> <span class="nv">animated</span><span class="p">:</span> <span class="kc">true</span><span class="p">)</span>
</code></pre>
<h3 id='session-expired-invalid-no-session-and-co-driver-login' class='heading'>Session expired/invalid/no-session and co-Driver Login</h3>

<p>To be notified when a user session has expired, set a listener:</p>
<pre class="highlight swift"><code><span class="n">driveVC</span><span class="o">.</span><span class="n">setLoginRequiredCallback</span> <span class="p">{</span> <span class="p">(</span><span class="n">status</span><span class="p">,</span> <span class="n">errorMessage</span><span class="p">)</span> <span class="k">in</span>
    <span class="o">...</span> <span class="o">...</span>
<span class="p">}</span>
</code></pre>

<p>Set a listener for session changes, including: no session, invalid session, session expired, or co-driver login is requested.</p>

<p>There are three predefined speical values for error messages that may be passed to the callback.</p>

<ul>
<li><code>&quot;&quot;</code>: an empty string indicates no login is required, login is successful, or the login is in progress. At this state, an implementor should present <code><a href="Classes/DriveViewController.html">DriveViewController</a></code>.</li>
<li><code>&quot;LoginRequired&quot;</code>: indicates the login UI is going to show a login form (No valid user is available or the current activeSession is expired/invalid). At this state an implementor should present a custom login screen.</li>
<li><code>&quot;AddCoDriver&quot;</code>: indicates that a co-driver login is requested. At this state and implementor should present a custom co-driver login screen.</li>
</ul>

<p>For any other error message an implementor should present a custom login screen.</p>

<p>After receiving a session expired callback. An integrator should dismiss the presented <code><a href="Classes/DriveViewController.html">DriveViewController</a></code> and present user with a login screen.</p>
<h3 id='other-important-callbacks' class='heading'>Other important callbacks</h3>

<p>There are few other callbacks useful for managing <code><a href="Classes/DriveViewController.html">DriveViewController</a></code>.</p>

<ul>
<li><p><code>DriveViewController::setDriverActionNecessaryCallback</code>: <code>driverActionNecessary</code> is a collection of events that may occur where the application should bring the Drive view contoller to the foreground. For example: &ldquo;Your vehicle has been selected by another driver. You now need to select a vehicle&rdquo;.</p></li>
<li><p><code>DriveViewController::setPageNavigationCallback</code>: <code>pageNavigation</code> indicates any navigation changes made by the driver in Geotab Drive.</p></li>
</ul>

<p>See more details in the <a href="https://geotab.github.io/mobile-sdk-ios/Classes/DriveViewController.html">API document</a>.</p>
<h3 id='overwrite-default-background-color-font-color-and-icon' class='heading'>Overwrite Default Background Color, Font Color, and Icon</h3>

<p>To override default background color in the network error page, create a property in <code>Info.plist</code> named <code>&quot;NetworkErrorScreenBckColor&quot;</code> of type <code>String</code>. Add a hex value for the color.
To override default font color in the network error page, create a property in <code>Info.plist</code> named <code>&quot;NetworkErrorScreenFontColor&quot;</code> of type <code>String</code>. Add a hex value for the color
To override default icon in the network error page, create a property in <code>Info.plist</code> named <code>&quot;NetworkErrorScreenIcon&quot;</code> of type String and add the name of the image. The image must also be added to the project.</p>
<h2 id='drive-apis' class='heading'>Drive APIs</h2>

<p>All drive APIs are accessible directly under an instance of <code><a href="Classes/DriveViewController.html">DriveViewController</a></code> or <code>MyGeotabbViewController</code>. See more details in the <a href="https://geotab.github.io/mobile-sdk-ios/">API document</a>.</p>
<h2 id='app-bound-domains' class='heading'>App-Bound Domains</h2>

<p>Incorporating App-Bound Domains into your application using the Geotab Drive SDK is recommended. For guidance, refer to <a href="https://webkit.org/blog/10882/app-bound-domains/">Appleâ€™s documentation</a> on enabling App-Bound Domains, and ensure you include <code>geotab.com</code> in your set of approved domains.</p>

<p>If you decide not to use App-Bound Domains, you&rsquo;ll need to set up the Mobile SDK to operate accordingly. When creating a <code><a href="Classes/DriveViewController.html">DriveViewController</a></code> instance, adjust the options to disable App-Bound Domains:</p>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">options</span> <span class="o">=</span> <span class="kt">MobileSdkOptions</span><span class="p">(</span><span class="nv">useAppBoundDomains</span><span class="p">:</span> <span class="kc">false</span><span class="p">)</span>
<span class="k">let</span> <span class="nv">driveViewController</span> <span class="o">=</span> <span class="kt">DriveViewController</span><span class="p">(</span><span class="nv">options</span><span class="p">:</span> <span class="n">options</span><span class="p">)</span>
</code></pre>
<h2 id='license' class='heading'>License</h2>

<p>GeotabDriveSDK is available under the MIT license. See the LICENSE file for more info.</p>

          </section>
        </section>
        <section id="footer">
          <p>&copy; 2025 <a class="link" href="" target="_blank" rel="external noopener"></a>. All rights reserved. (Last updated: 2025-02-20)</p>
          <p>Generated by <a class="link" href="https://github.com/realm/jazzy" target="_blank" rel="external noopener">jazzy â™ªâ™« v0.15.3</a>, a <a class="link" href="https://realm.io" target="_blank" rel="external noopener">Realm</a> project.</p>
        </section>
      </article>
    </div>
  </body>
</html>
